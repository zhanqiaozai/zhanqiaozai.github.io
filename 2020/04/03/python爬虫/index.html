<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>python爬虫 | 栈桥仔</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Response响应状态200代表成功、301表示跳转、404找不到页面、502服务器错误 响应头如内容类型、内容长度、服务器信息、设置Cookie等 响应体主要部分，包含了请求资源的内容、如网页HTML、图片二进制数据等 我们在做爬虫时可以用一些HTTP请求库，然后向服务器发送一个请求，得到这个Response,然后把这个响应体里面的内容拿下来，这个实际上就是网页的源代码，然后我们再把这个网页的">
<meta property="og:type" content="article">
<meta property="og:title" content="python爬虫">
<meta property="og:url" content="https://zhanqiaozai.github.io/2020/04/03/python%E7%88%AC%E8%99%AB/index.html">
<meta property="og:site_name" content="栈桥仔">
<meta property="og:description" content="Response响应状态200代表成功、301表示跳转、404找不到页面、502服务器错误 响应头如内容类型、内容长度、服务器信息、设置Cookie等 响应体主要部分，包含了请求资源的内容、如网页HTML、图片二进制数据等 我们在做爬虫时可以用一些HTTP请求库，然后向服务器发送一个请求，得到这个Response,然后把这个响应体里面的内容拿下来，这个实际上就是网页的源代码，然后我们再把这个网页的">
<meta property="og:image" content="https://gitee.com/zhanqiaozai/picture/raw/master/1580132124441.png">
<meta property="og:image" content="https://gitee.com/zhanqiaozai/picture/raw/master/1580206554561.png">
<meta property="og:image" content="https://gitee.com/zhanqiaozai/picture/raw/master/1580206474221.png">
<meta property="og:image" content="https://gitee.com/zhanqiaozai/picture/raw/master/1580203818631.png">
<meta property="og:image" content="https://gitee.com/zhanqiaozai/picture/raw/master/1580223155421.png">
<meta property="og:image" content="https://gitee.com/zhanqiaozai/picture/raw/master/1580276050159.png">
<meta property="og:image" content="https://gitee.com/zhanqiaozai/picture/raw/master/1580223107107.png">
<meta property="og:image" content="https://gitee.com/zhanqiaozai/picture/raw/master/1580206689321.png">
<meta property="og:image" content="https://gitee.com/zhanqiaozai/picture/raw/master/1580229349011.png">
<meta property="article:published_time" content="2020-04-03T06:36:06.840Z">
<meta property="article:modified_time" content="2020-04-03T09:16:15.826Z">
<meta property="article:author" content="zhanqiaozai">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/zhanqiaozai/picture/raw/master/1580132124441.png">
  
    <link rel="alternative" href="/atom.xml" title="栈桥仔" type="application/atom+xml">
  
  
    <link rel="icon" href="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  

  
<script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>

  
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  
<meta name="generator" content="Hexo 4.2.0"></head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">zhanqiaozai</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/smackgg/hexo-theme-smackdown">smackdown</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">zhanqiaozai</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">zhanqiaozai</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-python爬虫" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/04/03/python%E7%88%AC%E8%99%AB/" class="article-date">
  	<time datetime="2020-04-03T06:36:06.840Z" itemprop="datePublished">2020-04-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      python爬虫
      
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h5><h5 id="响应状态"><a href="#响应状态" class="headerlink" title="响应状态"></a>响应状态</h5><p>200代表成功、301表示跳转、404找不到页面、502服务器错误</p>
<h5 id="响应头"><a href="#响应头" class="headerlink" title="响应头"></a>响应头</h5><p>如内容类型、内容长度、服务器信息、设置Cookie等</p>
<h5 id="响应体"><a href="#响应体" class="headerlink" title="响应体"></a>响应体</h5><p>主要部分，包含了请求资源的内容、如网页HTML、图片二进制数据等</p>
<h5 id="我们在做爬虫时"><a href="#我们在做爬虫时" class="headerlink" title="我们在做爬虫时"></a>我们在做爬虫时</h5><h5 id="可以用一些HTTP请求库，然后向服务器发送一个请求，得到这个Response-然后把这个响应体里面的内容拿下来，这个实际上就是网页的源代码，然后我们再把这个网页的源代码，进行解析，就可以拿到我们的数据了，"><a href="#可以用一些HTTP请求库，然后向服务器发送一个请求，得到这个Response-然后把这个响应体里面的内容拿下来，这个实际上就是网页的源代码，然后我们再把这个网页的源代码，进行解析，就可以拿到我们的数据了，" class="headerlink" title="可以用一些HTTP请求库，然后向服务器发送一个请求，得到这个Response,然后把这个响应体里面的内容拿下来，这个实际上就是网页的源代码，然后我们再把这个网页的源代码，进行解析，就可以拿到我们的数据了，"></a>可以用一些HTTP请求库，然后向服务器发送一个请求，得到这个Response,然后把这个响应体里面的内容拿下来，这个实际上就是网页的源代码，然后我们再把这个网页的源代码，进行解析，就可以拿到我们的数据了，</h5><p>模拟请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line"></span><br><span class="line">#调用requests.get方法传入百度这个网址，这个也就是HTTP请求的发送，拿到这个响应</span><br><span class="line">#也就是说，requests库提供了get方法，我们传入这个URL也就是百度网址，就可以向服务器发送一个请求，然后拿到这个response</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.get(&#39;http:&#x2F;&#x2F;www.baidu.com&#39;)</span><br><span class="line"></span><br><span class="line">#打印response.text然后这个text就是把网页的源代码，也就是响应体拿过来</span><br><span class="line">&gt;&gt;&gt; print(response.text)</span><br><span class="line"></span><br><span class="line">#成功的获取到了这些网页的源代码，接下来就可以对网页进行解析了</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--STATUS OK--&gt;&lt;html&gt; &lt;head&gt;&lt;meta http-equiv&#x3D;content-type content&#x3D;text&#x2F;html;charset&#x3D;utf-8&gt;&lt;meta http-equiv&#x3D;X-UA-Compatible content&#x3D;IE&#x3D;Edge&gt;&lt;meta content&#x3D;always name&#x3D;referrer&gt;&lt;link rel&#x3D;stylesheet type&#x3D;text&#x2F;css href&#x3D;http:&#x2F;&#x2F;s1.bdstatic.com&#x2F;r&#x2F;www&#x2F;cache&#x2F;bdorz&#x2F;baidu.min.css&gt;&lt;title&gt;ç¾åº¦ä¸ä¸ï¼ä½ å°±ç¥é&lt;&#x2F;title&gt;&lt;&#x2F;head&gt; &lt;body link&#x3D;#0000cc&gt; &lt;div id&#x3D;wrapper&gt; &lt;div id&#x3D;head&gt; &lt;div class&#x3D;head_wrapper&gt; &lt;div class&#x3D;s_form&gt; &lt;div class&#x3D;s_form_wrapper&gt; &lt;div id&#x3D;lg&gt; &lt;img hidefocus&#x3D;true src&#x3D;&#x2F;&#x2F;www.baidu.com&#x2F;img&#x2F;bd_logo1.png width&#x3D;270 height&#x3D;129&gt; &lt;&#x2F;div&gt; &lt;form id&#x3D;form name&#x3D;f action&#x3D;&#x2F;&#x2F;www.baidu.com&#x2F;s class&#x3D;fm&gt; &lt;input type&#x3D;hidden name&#x3D;bdorz_come value&#x3D;1&gt; &lt;input type&#x3D;hidden name&#x3D;ie value&#x3D;utf-8&gt; &lt;input type&#x3D;hidden name&#x3D;f value&#x3D;8&gt; &lt;input type&#x3D;hidden name&#x3D;rsv_bp value&#x3D;1&gt; &lt;input type&#x3D;hidden name&#x3D;rsv_idx value&#x3D;1&gt; &lt;input type&#x3D;hidden name&#x3D;tn value&#x3D;baidu&gt;&lt;span class&#x3D;&quot;bg s_ipt_wr&quot;&gt;&lt;input id&#x3D;kw name&#x3D;wd class&#x3D;s_ipt value maxlength&#x3D;255 autocomplete&#x3D;off autofocus&gt;&lt;&#x2F;span&gt;&lt;span class&#x3D;&quot;bg s_btn_wr&quot;&gt;&lt;input type&#x3D;submit id&#x3D;su value&#x3D;ç¾åº¦ä¸ä¸ class&#x3D;&quot;bg s_btn&quot;&gt;&lt;&#x2F;span&gt; &lt;&#x2F;form&gt; &lt;&#x2F;div&gt; &lt;&#x2F;div&gt; &lt;div id&#x3D;u1&gt; &lt;a href&#x3D;http:&#x2F;&#x2F;news.baidu.com name&#x3D;tj_trnews class&#x3D;mnav&gt;æ°é»&lt;&#x2F;a&gt; &lt;a href&#x3D;http:&#x2F;&#x2F;www.hao123.com name&#x3D;tj_trhao123 class&#x3D;mnav&gt;hao123&lt;&#x2F;a&gt; &lt;a href&#x3D;http:&#x2F;&#x2F;map.baidu.com name&#x3D;tj_trmap class&#x3D;mnav&gt;å°å¾&lt;&#x2F;a&gt; &lt;a href&#x3D;http:&#x2F;&#x2F;v.baidu.com name&#x3D;tj_trvideo class&#x3D;mnav&gt;è§é¢&lt;&#x2F;a&gt; &lt;a href&#x3D;http:&#x2F;&#x2F;tieba.baidu.com name&#x3D;tj_trtieba class&#x3D;mnav&gt;è´´å§&lt;&#x2F;a&gt; &lt;noscript&gt; &lt;a href&#x3D;http:&#x2F;&#x2F;www.baidu.com&#x2F;bdorz&#x2F;login.gif?login&amp;tpl&#x3D;mn&amp;u&#x3D;http%3A%2F%2Fwww.baidu.com%2f%3fbdorz_come%3d1 name&#x3D;tj_login class&#x3D;lb&gt;ç»å½&lt;&#x2F;a&gt; &lt;&#x2F;noscript&gt; &lt;script&gt;document.write(&#39;&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.baidu.com&#x2F;bdorz&#x2F;login.gif?login&amp;tpl&#x3D;mn&amp;u&#x3D;&#39;+ encodeURIComponent(window.location.href+ (window.location.search &#x3D;&#x3D;&#x3D; &quot;&quot; ? &quot;?&quot; : &quot;&amp;&quot;)+ &quot;bdorz_come&#x3D;1&quot;)+ &#39;&quot; name&#x3D;&quot;tj_login&quot; class&#x3D;&quot;lb&quot;&gt;ç»å½&lt;&#x2F;a&gt;&#39;);&lt;&#x2F;script&gt; &lt;a href&#x3D;&#x2F;&#x2F;www.baidu.com&#x2F;more&#x2F; name&#x3D;tj_briicon class&#x3D;bri style&#x3D;&quot;display: block;&quot;&gt;æ´å¤äº§å&lt;&#x2F;a&gt; &lt;&#x2F;div&gt; &lt;&#x2F;div&gt; &lt;&#x2F;div&gt; &lt;div id&#x3D;ftCon&gt; &lt;div id&#x3D;ftConw&gt; &lt;p id&#x3D;lh&gt; &lt;a href&#x3D;http:&#x2F;&#x2F;home.baidu.com&gt;å³äºç¾åº¦&lt;&#x2F;a&gt; &lt;a href&#x3D;http:&#x2F;&#x2F;ir.baidu.com&gt;About Baidu&lt;&#x2F;a&gt; &lt;&#x2F;p&gt; &lt;p id&#x3D;cp&gt;&amp;copy;2017&amp;nbsp;Baidu&amp;nbsp;&lt;a href&#x3D;http:&#x2F;&#x2F;www.baidu.com&#x2F;duty&#x2F;&gt;ä½¿ç¨ç¾åº¦åå¿è¯»&lt;&#x2F;a&gt;&amp;nbsp; &lt;a href&#x3D;http:&#x2F;&#x2F;jianyi.baidu.com&#x2F; class&#x3D;cp-feedback&gt;æè§åé¦&lt;&#x2F;a&gt;&amp;nbsp;äº¬ICPè¯030173å·&amp;nbsp; &lt;img src&#x3D;&#x2F;&#x2F;www.baidu.com&#x2F;img&#x2F;gs.gif&gt; &lt;&#x2F;p&gt; &lt;&#x2F;div&gt; &lt;&#x2F;div&gt; &lt;&#x2F;div&gt; &lt;&#x2F;body&gt; &lt;&#x2F;html&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#打印响应头，是字典状态</span><br><span class="line">&gt;&gt;&gt; print(response.headers)</span><br><span class="line">&#123;&#39;Cache-Control&#39;: &#39;private, no-cache, no-store, proxy-revalidate, no-transform&#39;, &#39;Connection&#39;: &#39;keep-alive&#39;, &#39;Content-Encoding&#39;: &#39;gzip&#39;, &#39;Content-Type&#39;: &#39;text&#x2F;html&#39;, &#39;Date&#39;: &#39;Mon, 27 Jan 2020 05:20:09 GMT&#39;, &#39;Last-Modified&#39;: &#39;Mon, 23 Jan 2017 13:27:32 GMT&#39;, &#39;Pragma&#39;: &#39;no-cache&#39;, &#39;Server&#39;: &#39;bfe&#x2F;1.0.8.18&#39;, &#39;Set-Cookie&#39;: &#39;BDORZ&#x3D;27315; max-age&#x3D;86400; domain&#x3D;.baidu.com; path&#x3D;&#x2F;&#39;, &#39;Transfer-Encoding&#39;: &#39;chunked&#39;&#125;</span><br><span class="line"></span><br><span class="line">#打印相应状态，200表示成功，也就是正常的请求了百度</span><br><span class="line">&gt;&gt;&gt; print(response.status_code)</span><br><span class="line">200</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.get(&#39;http:&#x2F;&#x2F;www.baidu.com&#39;)</span><br><span class="line"></span><br><span class="line">#重新的发起一次请求，这次请求就携带了headers信息</span><br><span class="line">&gt;&gt;&gt; headers &#x3D; &#123;&#39;User-Agent&#39;:&#39;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;79.0.3945.130 Safari&#x2F;537.36&#39;&#125;</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.get(&#39;http:&#x2F;&#x2F;www.baidu.com&#39;,headers&#x3D;headers)</span><br><span class="line"></span><br><span class="line">#在这里将响应打印，发现响用的状态码还是200，表示这次请求也是成功的</span><br><span class="line">&gt;&gt;&gt; print(response.status_code)</span><br><span class="line">200</span><br></pre></td></tr></table></figure>

<h5 id="爬虫可以抓取怎么的数据"><a href="#爬虫可以抓取怎么的数据" class="headerlink" title="爬虫可以抓取怎么的数据"></a>爬虫可以抓取怎么的数据</h5><h5 id="1、网页文本：如HTML文档、Json格式文本等"><a href="#1、网页文本：如HTML文档、Json格式文本等" class="headerlink" title="1、网页文本：如HTML文档、Json格式文本等"></a>1、网页文本：如HTML文档、Json格式文本等</h5><h5 id="2、图片：获取到的是二进制文件，保存为图片格式。"><a href="#2、图片：获取到的是二进制文件，保存为图片格式。" class="headerlink" title="2、图片：获取到的是二进制文件，保存为图片格式。"></a>2、图片：获取到的是二进制文件，保存为图片格式。</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">爬取图片</span><br><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line">#用request中的get获得这个图片的URL</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.get(&#39;https:&#x2F;&#x2F;www.baidu.com&#x2F;img&#x2F;baidu_resultlogo@2.png&#39;)</span><br><span class="line">#以二进制形式打印response的内容出来</span><br><span class="line">&gt;&gt;&gt; print(response.content)</span><br><span class="line"></span><br><span class="line">#打开要保存图片的磁盘，给图片命名，以写入的方式打开二进制，</span><br><span class="line">&gt;&gt;&gt; with open(&#39;D:&#x2F;&#x2F;1.gif&#39;,&#39;wb&#39;) as f:</span><br><span class="line">	#写入response的内容</span><br><span class="line">	f.write(response.content)</span><br><span class="line">	#关闭文件</span><br><span class="line">	f.close()</span><br></pre></td></tr></table></figure>

<h5 id="3、视频：同为二进制文件，保存为视频格式即可。"><a href="#3、视频：同为二进制文件，保存为视频格式即可。" class="headerlink" title="3、视频：同为二进制文件，保存为视频格式即可。"></a>3、视频：同为二进制文件，保存为视频格式即可。</h5><h5 id="4、其他：只要是能请求到的，都能获取"><a href="#4、其他：只要是能请求到的，都能获取" class="headerlink" title="4、其他：只要是能请求到的，都能获取"></a>4、其他：只要是能请求到的，都能获取</h5><h5 id="解析方式"><a href="#解析方式" class="headerlink" title="解析方式"></a>解析方式</h5><h5 id="1、直接处理"><a href="#1、直接处理" class="headerlink" title="1、直接处理"></a>1、直接处理</h5><h5 id="2、Json解析"><a href="#2、Json解析" class="headerlink" title="2、Json解析"></a>2、Json解析</h5><h5 id="3、正则表达式"><a href="#3、正则表达式" class="headerlink" title="3、正则表达式"></a>3、正则表达式</h5><p>4、BeautifulSoup</p>
<p>5、PyQuery</p>
<p>6、XPath</p>
<h5 id="为什么我抓到的和浏览器看到的不一样"><a href="#为什么我抓到的和浏览器看到的不一样" class="headerlink" title="为什么我抓到的和浏览器看到的不一样"></a>为什么我抓到的和浏览器看到的不一样</h5><h5 id="怎样解决JavaScript渲染问题"><a href="#怎样解决JavaScript渲染问题" class="headerlink" title="怎样解决JavaScript渲染问题"></a>怎样解决JavaScript渲染问题</h5><ul>
<li>分析 Ajax请求</li>
<li>selenium/webdriver</li>
</ul>
<h5 id="怎样保存数据"><a href="#怎样保存数据" class="headerlink" title="怎样保存数据"></a>怎样保存数据</h5><p>1、文本：纯文本，Json，Xml等</p>
<p>2、关系型数据库：MySQL、Oracle、SQLServer等具有结构化表结构形式存储</p>
<p>3、非关系型数据库：MongoDB、Redis等Key-Value形式存储</p>
<p>4、二进制文件：图片，视频，音频等直接保存成特定格式即可</p>
<h4 id="Urllib库"><a href="#Urllib库" class="headerlink" title="Urllib库"></a>Urllib库</h4><h5 id="python内置的HTTP请求库"><a href="#python内置的HTTP请求库" class="headerlink" title="python内置的HTTP请求库"></a>python内置的HTTP请求库</h5><h5 id="urllib-request-请求模块"><a href="#urllib-request-请求模块" class="headerlink" title="urllib.request    请求模块"></a>urllib.request    请求模块</h5><h5 id="urllib-error-异常处理模块"><a href="#urllib-error-异常处理模块" class="headerlink" title="urllib.error        异常处理模块"></a>urllib.error        异常处理模块</h5><h5 id="urllib-parse-url解析模块"><a href="#urllib-parse-url解析模块" class="headerlink" title="urllib.parse        url解析模块"></a>urllib.parse        url解析模块</h5><h5 id="urllib-robotparser-rebots-txt解析模块"><a href="#urllib-robotparser-rebots-txt解析模块" class="headerlink" title="urllib.robotparser    rebots.txt解析模块"></a>urllib.robotparser    rebots.txt解析模块</h5><h5 id="把网页请求下来"><a href="#把网页请求下来" class="headerlink" title="把网页请求下来"></a>把网页请求下来</h5><h5 id="urllib-request-urlopen"><a href="#urllib-request-urlopen" class="headerlink" title="urllib.request.urlopen()"></a>urllib.request.urlopen()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import urllib.request</span><br><span class="line"></span><br><span class="line">#请求打开百度这个网站，将数据赋值给respones</span><br><span class="line">respones &#x3D; urllib.request.urlopen(&quot;http:&#x2F;&#x2F;www.baidu.com&quot;)</span><br><span class="line">#阅读百度源代码</span><br><span class="line">print(respones.read().decode(&quot;utf-8&quot;))</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import urllib.parse</span><br><span class="line">import urllib.request</span><br><span class="line"></span><br><span class="line">data &#x3D; bytes(urllib.parse.urlencode(&#123;&#39;word&#39;:&#39;hello&#39;&#125;),encoding &#x3D; &#39;utf-8&#39;)</span><br><span class="line">respones &#x3D; urllib.request.urlopen(&#39;http:&#x2F;&#x2F;httpbin.org&#x2F;post&#39;,data &#x3D; data)</span><br><span class="line">print(respones.read())</span><br><span class="line"></span><br><span class="line">b&#39;&#123;\n  &quot;args&quot;: &#123;&#125;, \n  &quot;data&quot;: &quot;&quot;, \n  &quot;files&quot;: &#123;&#125;, \n  &quot;form&quot;: &#123;\n    &quot;word&quot;: &quot;hello&quot;\n  &#125;, \n  &quot;headers&quot;: &#123;\n    &quot;Accept-Encoding&quot;: &quot;identity&quot;, \n    &quot;Content-Length&quot;: &quot;10&quot;, \n    &quot;Content-Type&quot;: &quot;application&#x2F;x-www-form-urlencoded&quot;, \n    &quot;Host&quot;: &quot;httpbin.org&quot;, \n    &quot;User-Agent&quot;: &quot;Python-urllib&#x2F;3.8&quot;, \n    &quot;X-Amzn-Trace-Id&quot;: &quot;Root&#x3D;1-5e2ed849-e71b483cf9d302cdd04052a1&quot;\n  &#125;, \n  &quot;json&quot;: null, \n  &quot;origin&quot;: &quot;112.226.8.246&quot;, \n  &quot;url&quot;: &quot;http:&#x2F;&#x2F;httpbin.org&#x2F;post&quot;\n&#125;\n&#39;</span><br></pre></td></tr></table></figure>

<h5 id="设置超时时间"><a href="#设置超时时间" class="headerlink" title="设置超时时间"></a>设置超时时间</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request</span><br><span class="line"></span><br><span class="line">response &#x3D; urllib.request.urlopen(&quot;http:&#x2F;&#x2F;httpbin.org&#x2F;get&quot;,timeout &#x3D; 1)</span><br><span class="line">print(response.read())</span><br><span class="line"></span><br><span class="line">b&#39;&#123;\n  &quot;args&quot;: &#123;&#125;, \n  &quot;headers&quot;: &#123;\n    &quot;Accept-Encoding&quot;: &quot;identity&quot;, \n    &quot;Host&quot;: &quot;httpbin.org&quot;, \n    &quot;User-Agent&quot;: &quot;Python-urllib&#x2F;3.8&quot;, \n    &quot;X-Amzn-Trace-Id&quot;: &quot;Root&#x3D;1-5e2ed91e-9795fe0068ea47d0c32daea0&quot;\n  &#125;, \n  &quot;origin&quot;: &quot;112.226.8.246&quot;, \n  &quot;url&quot;: &quot;http:&#x2F;&#x2F;httpbin.org&#x2F;get&quot;\n&#125;\n&#39;</span><br></pre></td></tr></table></figure>

<h4 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h4><h5 id="响应类型"><a href="#响应类型" class="headerlink" title="响应类型"></a>响应类型</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request</span><br><span class="line"></span><br><span class="line">response &#x3D; urllib.request.urlopen(&quot;http:&#x2F;&#x2F;www.baidu.com&quot;)</span><br><span class="line">print(response.status)</span><br><span class="line"></span><br><span class="line">200</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request</span><br><span class="line"></span><br><span class="line">response &#x3D; urllib.request.urlopen(&quot;http:&#x2F;&#x2F;www.python.org&quot;)</span><br><span class="line"></span><br><span class="line">#read就是获取响应体的内容，这个响应体的内容是要给字节流形式，然后用decode进行解码转成utf-8</span><br><span class="line">print(response.read().decode(&quot;utf-8&quot;))</span><br></pre></td></tr></table></figure>

<h5 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request</span><br><span class="line"></span><br><span class="line">request &#x3D; urllib.request.Request(&quot;http:&#x2F;&#x2F;python.org&quot;)</span><br><span class="line">response &#x3D; urllib.request.urlopen(request)</span><br><span class="line">print(response.read()).decode(&#39;utf-8&#39;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request,parse</span><br><span class="line"></span><br><span class="line">url &#x3D; &#39;网址&#39;</span><br><span class="line">headers &#x3D; &#123;&#39;User-Agent&#39;:&#39;对应&#39;&#125;</span><br><span class="line"></span><br><span class="line">dict &#x3D; &#123;&#39;name&#39;:&#39;Germey&#39;&#125;</span><br><span class="line">data &#x3D; bytes(parse.urlencode(dict),encoding&#x3D;&quot;utf-8&quot;)</span><br><span class="line">req &#x3D; request.Request(url&#x3D;url,data&#x3D;data,headers&#x3D;header,method&#x3D;&#39;POST&#39;)</span><br><span class="line">response &#x3D; request.rulopen(req)</span><br><span class="line">print(response.read().decode(&#39;tuf-8&#39;))</span><br></pre></td></tr></table></figure>

<h5 id="Handler"><a href="#Handler" class="headerlink" title="Handler"></a>Handler</h5><h5 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">可以伪装自己的IP地址，服务器识别的IP就是代理的ip</span><br><span class="line"></span><br><span class="line">import urllib.request</span><br><span class="line"></span><br><span class="line">proxy_handler &#x3D; rullib,request.ProxyHandler(&#123;&#39;http&#39;&#39;http:&#x2F;&#x2F;127.0.0.1:9743&#39;&#125;)</span><br><span class="line">opener &#x3D; urllib.reuqest.build_opener(proxy_handler)</span><br><span class="line">response &#x3D; opener.open(&quot;http:&#x2F;&#x2F;httpbin.org&#x2F;get&quot;)</span><br><span class="line">pritn(response.read())</span><br></pre></td></tr></table></figure>

<h5 id="URL解析"><a href="#URL解析" class="headerlink" title="URL解析"></a>URL解析</h5><h5 id="urlparse"><a href="#urlparse" class="headerlink" title="urlparse"></a>urlparse</h5><p><img src="https://gitee.com/zhanqiaozai/picture/raw/master/1580132124441.png" alt="1580132124441"></p>
<h4 id="Requsets"><a href="#Requsets" class="headerlink" title="Requsets"></a>Requsets</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 导入 requests 模块</span><br><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line"># 接收百度这个网址，传给变量response</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.get(&#39;http:&#x2F;&#x2F;www.baidu.com&#x2F;&#39;)</span><br><span class="line"># 查看response格式</span><br><span class="line">&gt;&gt;&gt; print(type(response))</span><br><span class="line"># 打印response的状态码</span><br><span class="line">&gt;&gt;&gt; print(response.status_code)</span><br><span class="line"># 查看response的文本类型</span><br><span class="line">&gt;&gt;&gt; print(type(response.text))</span><br><span class="line"># 打印response文本</span><br><span class="line">&gt;&gt;&gt; print(response.text)</span><br></pre></td></tr></table></figure>

<h4 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h4><h4 id="基本GET请求"><a href="#基本GET请求" class="headerlink" title="基本GET请求"></a>基本GET请求</h4><h5 id="基本写法"><a href="#基本写法" class="headerlink" title="基本写法"></a>基本写法</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">这是最简单的get请求</span><br><span class="line"></span><br><span class="line"># 导入 requests 模块</span><br><span class="line">&gt;&gt;&gt;import requests</span><br><span class="line"># 请求接收 httpbin网址</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.get(&quot;http:&#x2F;&#x2F;www.httpbin.org&#x2F;get&quot;)</span><br><span class="line"># 打印 response文本</span><br><span class="line">&gt;&gt;&gt; print(response.text)</span><br></pre></td></tr></table></figure>

<h4 id="带参数GET请求"><a href="#带参数GET请求" class="headerlink" title="带参数GET请求"></a>带参数GET请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line"># GET请求参数就要拼接到URL后面用？问好分隔，将参数传过来用&amp;分隔</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.get(&#39;http:&#x2F;&#x2F;httpbin.org&#x2F;get?name&#x3D;germey&amp;age&#x3D;22&#39;)</span><br><span class="line">&gt;&gt;&gt; print(response.text)</span><br></pre></td></tr></table></figure>

<p>以上方法是比较繁琐的，resquests提供了一个非常简单的参数。这个参数叫params</p>
<h4 id="将params传入一个字典形式，这样也可以构造一个GET形式参数"><a href="#将params传入一个字典形式，这样也可以构造一个GET形式参数" class="headerlink" title="将params传入一个字典形式，这样也可以构造一个GET形式参数"></a>将params传入一个字典形式，这样也可以构造一个GET形式参数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line">&gt;&gt;&gt; data &#x3D; &#123;&#39;name&#39;:&#39;germty&#39;,&#39;age&#39;:22&#125;</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.get(&#39;http:&#x2F;&#x2F;httpbin.org&#x2F;get&#39;,params &#x3D; data)</span><br><span class="line">&gt;&gt;&gt; print(response.text)</span><br></pre></td></tr></table></figure>

<h4 id="解析json"><a href="#解析json" class="headerlink" title="解析json"></a>解析json</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.get(&#39;http:&#x2F;&#x2F;httpbin.org&#x2F;get&#39;)</span><br><span class="line"># 解析前 他是str格式</span><br><span class="line">&gt;&gt;&gt; print(type(response.text))</span><br><span class="line">&lt;class &#39;str&#39;&gt;</span><br><span class="line">&gt;&gt;&gt; print(response.json())</span><br><span class="line"># 解析后 他是dict格式</span><br><span class="line">&gt;&gt;&gt; print(type(response.json()))</span><br><span class="line">&lt;class &#39;dict&#39;&gt;</span><br></pre></td></tr></table></figure>

<h4 id="获取二进制数据"><a href="#获取二进制数据" class="headerlink" title="获取二进制数据"></a>获取二进制数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 导入模块</span><br><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line"># 获取图片网址</span><br><span class="line">&gt;&gt;&gt; response &#x3D; request.get(&quot;https:&#x2F;&#x2F;images2017.cnblogs.com&#x2F;blog&#x2F;777527&#x2F;201712&#x2F;777527-20171206153020144-701297613.png&quot;)</span><br><span class="line"># 以二进制形式打开并保存图片路径</span><br><span class="line">&gt;&gt;&gt; wiht open(&quot;D:&#x2F;&#x2F;json.jpg&quot;,&quot;wb&quot;) as f:</span><br><span class="line"># 写入其二进制内容</span><br><span class="line">	f.write(response.content)</span><br><span class="line"># 关闭文件</span><br><span class="line">	f.close()</span><br></pre></td></tr></table></figure>

<h4 id="添加headers"><a href="#添加headers" class="headerlink" title="添加headers"></a>添加headers</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">如果不加headers会被网站屏蔽</span><br><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.get(&#39;http:&#x2F;&#x2F;www.zhihu.com&#x2F;explore&#39;)</span><br><span class="line">&gt;&gt;&gt; print(response.text)</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;400 Bad Request&lt;&#x2F;title&gt;&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body bgcolor&#x3D;&quot;white&quot;&gt;</span><br><span class="line">&lt;center&gt;&lt;h1&gt;400 Bad Request&lt;&#x2F;h1&gt;&lt;&#x2F;center&gt;</span><br><span class="line">&lt;hr&gt;&lt;center&gt;openresty&lt;&#x2F;center&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">加上headers就可以查看response的文本</span><br><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line">&gt;&gt;&gt; headers &#x3D; &#123;&#39;User-Agent&#39;:&#39;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;79.0.3945.130 Safari&#x2F;537.36&#39;&#125;</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.get(&#39;http:&#x2F;&#x2F;www.zhihu.com&#x2F;explore&#39;,headers &#x3D; headers)</span><br><span class="line">&gt;&gt;&gt; print(response.text)</span><br></pre></td></tr></table></figure>

<h4 id="基本POST请求"><a href="#基本POST请求" class="headerlink" title="基本POST请求"></a>基本POST请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># 导入模块</span><br><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line"># 设置data参数</span><br><span class="line">&gt;&gt;&gt; data &#x3D; &#123;&#39;name&#39;:&#39;germey&#39;,&#39;age&#39;:&#39;22&#39;&#125;</span><br><span class="line"># 进行post请求</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.post(&#39;http:&#x2F;&#x2F;httpbin.org&#x2F;post&#39;,data &#x3D; data,headers &#x3D; headers)</span><br><span class="line"># 打印response文本</span><br><span class="line">&gt;&gt;&gt; print(response.text)</span><br><span class="line"></span><br><span class="line"># 这里打印的文本是str格式</span><br><span class="line">&#123;</span><br><span class="line">  &quot;args&quot;: &#123;&#125;, </span><br><span class="line">  &quot;data&quot;: &quot;&quot;, </span><br><span class="line">  &quot;files&quot;: &#123;&#125;, </span><br><span class="line">  &quot;form&quot;: &#123;</span><br><span class="line">    &quot;age&quot;: &quot;22&quot;, </span><br><span class="line">    &quot;name&quot;: &quot;germey&quot;</span><br><span class="line">  &#125;, </span><br><span class="line">  &quot;headers&quot;: &#123;</span><br><span class="line">    &quot;Accept&quot;: &quot;*&#x2F;*&quot;, </span><br><span class="line">    &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;, </span><br><span class="line">    &quot;Content-Length&quot;: &quot;18&quot;, </span><br><span class="line">    &quot;Content-Type&quot;: &quot;application&#x2F;x-www-form-urlencoded&quot;, </span><br><span class="line">    &quot;Host&quot;: &quot;httpbin.org&quot;, </span><br><span class="line">    &quot;User-Agent&quot;: &quot;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;79.0.3945.130 Safari&#x2F;537.36&quot;, </span><br><span class="line">    &quot;X-Amzn-Trace-Id&quot;: &quot;Root&#x3D;1-5e2fdea2-a2bd0afafc4743c2926d9b9f&quot;</span><br><span class="line">  &#125;, </span><br><span class="line">  &quot;json&quot;: null, </span><br><span class="line">  &quot;origin&quot;: &quot;112.226.8.246&quot;, </span><br><span class="line">  &quot;url&quot;: &quot;http:&#x2F;&#x2F;httpbin.org&#x2F;post&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 导入模块</span><br><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line"># 设置data参数</span><br><span class="line">&gt;&gt;&gt; data &#x3D; &#123;&#39;name&#39;:&#39;germey&#39;,&#39;age&#39;:&#39;22&#39;&#125;</span><br><span class="line"># 设置headers</span><br><span class="line">&gt;&gt;&gt; headers &#x3D; &#123;&#39;User-Agent&#39;:&#39;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;79.0.3945.130 Safari&#x2F;537.36&#39;&#125;</span><br><span class="line"># 进行psot请求</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.post(&#39;http:&#x2F;&#x2F;httpbin.org&#x2F;post&#39;,data &#x3D; data,headers &#x3D; headers)</span><br><span class="line"># 解析response</span><br><span class="line">&gt;&gt;&gt; print(response.json())</span><br><span class="line"></span><br><span class="line"># 解析之后就变成了dick格式</span><br><span class="line">&#123;&#39;args&#39;: &#123;&#125;, &#39;data&#39;: &#39;&#39;, &#39;files&#39;: &#123;&#125;, &#39;form&#39;: &#123;&#39;age&#39;: &#39;22&#39;, &#39;name&#39;: &#39;germey&#39;&#125;, &#39;headers&#39;: &#123;&#39;Accept&#39;: &#39;*&#x2F;*&#39;, &#39;Accept-Encoding&#39;: &#39;gzip, deflate&#39;, &#39;Content-Length&#39;: &#39;18&#39;, &#39;Content-Type&#39;: &#39;application&#x2F;x-www-form-urlencoded&#39;, &#39;Host&#39;: &#39;httpbin.org&#39;, &#39;User-Agent&#39;: &#39;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;79.0.3945.130 Safari&#x2F;537.36&#39;, &#39;X-Amzn-Trace-Id&#39;: &#39;Root&#x3D;1-5e2fde03-cae7a73c2ed8eed413526372&#39;&#125;, &#39;json&#39;: None, &#39;origin&#39;: &#39;112.226.8.246&#39;, &#39;url&#39;: &#39;http:&#x2F;&#x2F;httpbin.org&#x2F;post&#39;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="响应-1"><a href="#响应-1" class="headerlink" title="响应"></a>响应</h3><h4 id="response属性"><a href="#response属性" class="headerlink" title="response属性"></a>response属性</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line"># 隐藏服务器，防止屏蔽</span><br><span class="line">&gt;&gt;&gt; headers &#x3D; &#123;&#39;User-Agent&#39;:&#39;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;79.0.3945.130 Safari&#x2F;537.36&#39;&#125;</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.get(&#39;http:&#x2F;&#x2F;www.jianshu.com&#39;，headers &#x3D; headers)</span><br><span class="line"># 打印状态码</span><br><span class="line">&gt;&gt;&gt; print(type(response.status_code),response.status_code)</span><br><span class="line"># 打印headers</span><br><span class="line">&gt;&gt;&gt; print(type(response.headers),response.headers)</span><br><span class="line"># 打印cookies</span><br><span class="line">&gt;&gt;&gt; print(type(response.cookies),response.cookies)</span><br><span class="line"># 打印url网址</span><br><span class="line">&gt;&gt;&gt; print(type(response.url),response.url)</span><br><span class="line"># 打印history也就是历史清单</span><br><span class="line">&gt;&gt;&gt; print(type(response.history),response.history)</span><br></pre></td></tr></table></figure>

<h4 id="状态码判断"><a href="#状态码判断" class="headerlink" title="状态码判断"></a>状态码判断</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">一些常见的状态码为：</span><br><span class="line">200 - 服务器成功返回网页 </span><br><span class="line">404 - 请求的网页不存在 </span><br><span class="line">503 - 服务不可用 </span><br><span class="line">详细分解：</span><br><span class="line">1xx（临时响应） </span><br><span class="line">表示临时响应并需要请求者继续执行操作的状态代码。</span><br><span class="line">代码 说明 </span><br><span class="line">100 （继续） 请求者应当继续提出请求。服务器返回此代码表示已收到请求的第一部分，正在等待其余部分。 </span><br><span class="line">101 （切换协议） 请求者已要求服务器切换协议，服务器已确认并准备切换。</span><br><span class="line">2xx （成功） </span><br><span class="line">表示成功处理了请求的状态代码。</span><br><span class="line">代码 说明 </span><br><span class="line">200 （成功） 服务器已成功处理了请求。通常，这表示服务器提供了请求的网页。 </span><br><span class="line">201 （已创建） 请求成功并且服务器创建了新的资源。 </span><br><span class="line">202 （已接受） 服务器已接受请求，但尚未处理。 </span><br><span class="line">203 （非授权信息） 服务器已成功处理了请求，但返回的信息可能来自另一来源。 </span><br><span class="line">204 （无内容） 服务器成功处理了请求，但没有返回任何内容。 </span><br><span class="line">205 （重置内容） 服务器成功处理了请求，但没有返回任何内容。 </span><br><span class="line">206 （部分内容） 服务器成功处理了部分 GET 请求。</span><br><span class="line">3xx （重定向） </span><br><span class="line">表示要完成请求，需要进一步操作。 通常，这些状态代码用来重定向。</span><br><span class="line">代码 说明 </span><br><span class="line">300 （多种选择） 针对请求，服务器可执行多种操作。服务器可根据请求者 (user agent) 选择一项操作，或提供操作列表供请求者选择。 </span><br><span class="line">301 （永久移动） 请求的网页已永久移动到新位置。服务器返回此响应（对 GET 或 HEAD 请求的响应）时，会自动将请求者转到新位置。 </span><br><span class="line">302 （临时移动） 服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。 </span><br><span class="line">303 （查看其他位置） 请求者应当对不同的位置使用单独的 GET 请求来检索响应时，服务器返回此代码。 </span><br><span class="line">304 （未修改） 自从上次请求后，请求的网页未修改过。服务器返回此响应时，不会返回网页内容。 </span><br><span class="line">305 （使用代理） 请求者只能使用代理访问请求的网页。如果服务器返回此响应，还表示请求者应使用代理。 </span><br><span class="line">307 （临时重定向） 服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。</span><br><span class="line">4xx（请求错误） </span><br><span class="line">这些状态代码表示请求可能出错，妨碍了服务器的处理。</span><br><span class="line">代码 说明 </span><br><span class="line">400 （错误请求） 服务器不理解请求的语法。 </span><br><span class="line">401 （未授权） 请求要求身份验证。 对于需要登录的网页，服务器可能返回此响应。 </span><br><span class="line">403 （禁止） 服务器拒绝请求。 </span><br><span class="line">404 （未找到） 服务器找不到请求的网页。 </span><br><span class="line">405 （方法禁用） 禁用请求中指定的方法。 </span><br><span class="line">406 （不接受） 无法使用请求的内容特性响应请求的网页。 </span><br><span class="line">407 （需要代理授权） 此状态代码与 401（未授权）类似，但指定请求者应当授权使用代理。 </span><br><span class="line">408 （请求超时） 服务器等候请求时发生超时。 </span><br><span class="line">409 （冲突） 服务器在完成请求时发生冲突。服务器必须在响应中包含有关冲突的信息。 </span><br><span class="line">410 （已删除） 如果请求的资源已永久删除，服务器就会返回此响应。 </span><br><span class="line">411 （需要有效长度） 服务器不接受不含有效内容长度标头字段的请求。 </span><br><span class="line">412 （未满足前提条件） 服务器未满足请求者在请求中设置的其中一个前提条件。 </span><br><span class="line">413 （请求实体过大） 服务器无法处理请求，因为请求实体过大，超出服务器的处理能力。 </span><br><span class="line">414 （请求的 URI 过长） 请求的 URI（通常为网址）过长，服务器无法处理。 </span><br><span class="line">415 （不支持的媒体类型） 请求的格式不受请求页面的支持。 </span><br><span class="line">416 （请求范围不符合要求） 如果页面无法提供请求的范围，则服务器会返回此状态代码。 </span><br><span class="line">417 （未满足期望值） 服务器未满足”期望”请求标头字段的要求。</span><br><span class="line">5xx（服务器错误） </span><br><span class="line">这些状态代码表示服务器在尝试处理请求时发生内部错误。 这些错误可能是服务器本身的错误，而不是请求出错。</span><br><span class="line">代码 说明 </span><br><span class="line">500 （服务器内部错误） 服务器遇到错误，无法完成请求。 </span><br><span class="line">501 （尚未实施） 服务器不具备完成请求的功能。例如，服务器无法识别请求方法时可能会返回此代码。 </span><br><span class="line">502 （错误网关） 服务器作为网关或代理，从上游服务器收到无效响应。 </span><br><span class="line">503 （服务不可用） 服务器目前无法使用（由于超载或停机维护）。通常，这只是暂时状态。 </span><br><span class="line">504 （网关超时） 服务器作为网关或代理，但是没有及时从上游服务器收到请求。 </span><br><span class="line">505 （HTTP 版本不受支持） 服务器不支持请求中所用的 HTTP 协议版本。</span><br><span class="line">HttpWatch状态码Result is</span><br><span class="line">200 - 服务器成功返回网页，客户端请求已成功。 </span><br><span class="line">302 - 对象临时移动。服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。 </span><br><span class="line">304 - 属于重定向。自上次请求后，请求的网页未修改过。服务器返回此响应时，不会返回网页内容。 </span><br><span class="line">401 - 未授权。请求要求身份验证。 对于需要登录的网页，服务器可能返回此响应。 </span><br><span class="line">404 - 未找到。服务器找不到请求的网页。 </span><br><span class="line">2xx - 成功。表示服务器成功地接受了客户端请求。 </span><br><span class="line">3xx - 重定向。表示要完成请求，需要进一步操作。客户端浏览器必须采取更多操作来实现请求。例如，浏览器可能不得不请求服务器上的不同的页面，或通过代理服务器重复该请求。 </span><br><span class="line">4xx - 请求错误。这些状态代码表示请求可能出错，妨碍了服务器的处理。 </span><br><span class="line">5xx - 服务器错误。表示服务器在尝试处理请求时发生内部错误。 这些错误可能是服务器本身的错误，而不是请求出错。</span><br></pre></td></tr></table></figure>

<h3 id="高级操作"><a href="#高级操作" class="headerlink" title="高级操作"></a>高级操作</h3><h4 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 导入模块</span><br><span class="line">&gt;&gt;&gt; import requests</span><br><span class="line"># 以只读的方式打开图片</span><br><span class="line">&gt;&gt;&gt; files &#x3D; &#123;&#39;file&#39;:open(&#39;D:&#x2F;&#x2F;1580132124441.png&#39;,&#39;rb&#39;)&#125;</span><br><span class="line"># 选择要上传的网站</span><br><span class="line">&gt;&gt;&gt; response &#x3D; requests.post(&#39;http:&#x2F;&#x2F;httpbin.org&#x2F;post&#39;,files &#x3D; files)</span><br><span class="line">&gt;&gt;&gt; print(response.text)</span><br></pre></td></tr></table></figure>

<h4 id="获取cookie"><a href="#获取cookie" class="headerlink" title="获取cookie"></a>获取cookie</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 导入模块</span><br><span class="line">import requests</span><br><span class="line"># 请求接收baidu网址</span><br><span class="line">response &#x3D; requests.get(&quot;https:&#x2F;&#x2F;www.baidu.com&quot;)</span><br><span class="line"># 打印cookies</span><br><span class="line">print(response.cookies)</span><br><span class="line"># 进行循环response.cookies.items项目，将key和value合并</span><br><span class="line">for key,value in response.cookies.items():</span><br><span class="line">	print(key + &#39;&#x3D;&#39; + value)</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&lt;RequestsCookieJar[&lt;Cookie BDORZ&#x3D;27315 for .baidu.com&#x2F;&gt;]&gt;</span><br><span class="line">BDORZ&#x3D;27315</span><br></pre></td></tr></table></figure>

<h4 id="会话维持"><a href="#会话维持" class="headerlink" title="会话维持"></a>会话维持</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">模拟登录</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 导入模块</span><br><span class="line">import requests</span><br><span class="line"># 用requests中的Session()对象</span><br><span class="line">s&#x3D; requests.Session()</span><br><span class="line">s.get(&#39;http:&#x2F;&#x2F;httpbin.org&#x2F;cookies&#x2F;set&#x2F;number&#x2F;123546465&#39;)</span><br><span class="line">response &#x3D; s.get(&#39;http:&#x2F;&#x2F;httpbin.org&#x2F;cookies&#39;)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure>

<h4 id="证书验证"><a href="#证书验证" class="headerlink" title="证书验证"></a>证书验证</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">#如果证书不存在会报错</span><br><span class="line">response &#x3D; requests.get(&#39;https:&#x2F;&#x2F;www.12306.cn&#39;)</span><br><span class="line">print(response.status_code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 将verify设置为False之后就会打印状态码，但还是会提示最好验证证书</span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line">response &#x3D; requests.get(&#39;https:&#x2F;&#x2F;www.12306.cn&#39;,verify &#x3D; False)</span><br><span class="line">print(response.status_code)</span><br></pre></td></tr></table></figure>

<h4 id="代理设置"><a href="#代理设置" class="headerlink" title="代理设置"></a>代理设置</h4><p><img src="https://gitee.com/zhanqiaozai/picture/raw/master/1580206554561.png" alt="1580203818631"></p>
<h4 id="超时设置"><a href="#超时设置" class="headerlink" title="超时设置"></a>超时设置</h4><h5 id="限制服务器应答速度"><a href="#限制服务器应答速度" class="headerlink" title="限制服务器应答速度"></a>限制服务器应答速度</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line">response &#x3D; requests.get(&#39;http:&#x2F;&#x2F;www.taobao.com&#39;,timeout &#x3D; 1 )</span><br><span class="line">print(response.status_code)</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/zhanqiaozai/picture/raw/master/1580206474221.png" alt="1580206474221"></p>
<h4 id="认证设置"><a href="#认证设置" class="headerlink" title="认证设置"></a>认证设置</h4><p><img src="https://gitee.com/zhanqiaozai/picture/raw/master/1580203818631.png" alt="1580206554561"></p>
<h4 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h4><p><img src="https://gitee.com/zhanqiaozai/picture/raw/master/1580223155421.png" alt="1580206689321"></p>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><h5 id="正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。-非python独有，re模块实现"><a href="#正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。-非python独有，re模块实现" class="headerlink" title="正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。    非python独有，re模块实现"></a>正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。    非python独有，re模块实现</h5><p><img src="https://gitee.com/zhanqiaozai/picture/raw/master/1580276050159.png" alt="1580276050159"></p>
<h4 id="re-match"><a href="#re-match" class="headerlink" title="re.match"></a>re.match</h4><h5 id="re-match-尝试从字符串的起始位置匹配一个模式，如果不是从起始位置匹配成功的话，match-就返回none"><a href="#re-match-尝试从字符串的起始位置匹配一个模式，如果不是从起始位置匹配成功的话，match-就返回none" class="headerlink" title="re.match 尝试从字符串的起始位置匹配一个模式，如果不是从起始位置匹配成功的话，match()就返回none."></a>re.match 尝试从字符串的起始位置匹配一个模式，如果不是从起始位置匹配成功的话，match()就返回none.</h5><h5 id="最常规的匹配"><a href="#最常规的匹配" class="headerlink" title="最常规的匹配"></a>最常规的匹配</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 导入 re 模块</span><br><span class="line">&gt;&gt;&gt; import re</span><br><span class="line"># 将字符串赋值给变量content</span><br><span class="line">&gt;&gt;&gt; content &#x3D; &#39;Hello 123 4567 Whord_this is a regex demo&#39;</span><br><span class="line"># 将匹配结果赋值给result变量</span><br><span class="line">&gt;&gt;&gt; result &#x3D; re.match(&quot;^Hello\s\d&#123;3&#125;\s\d&#123;4&#125;\s\w&#123;10&#125;.*demo$&quot;,content)</span><br><span class="line"># 打印result变量</span><br><span class="line">&gt;&gt;&gt; print(result)</span><br><span class="line"># span表示打印的字符长度</span><br><span class="line">&lt;re.Match object; span&#x3D;(0, 41), match&#x3D;&#39;Hello 123 4567 Whord_this is a regex demo&#39;&gt;</span><br></pre></td></tr></table></figure>

<h5 id="泛匹配"><a href="#泛匹配" class="headerlink" title="泛匹配"></a>泛匹配</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import re</span><br><span class="line">&gt;&gt;&gt; content &#x3D; &#39;Hello 123 4567 Whord_this is a regex demo&#39;</span><br><span class="line"># 将以Hello开头，demo$结尾中间的字符全都打印了出来</span><br><span class="line">&gt;&gt;&gt; result &#x3D; re.match(&quot;^Hello.*demo$&quot;,content)</span><br><span class="line">&gt;&gt;&gt; print(result)</span><br><span class="line">&lt;re.Match object; span&#x3D;(0, 41), match&#x3D;&#39;Hello 123 4567 Whord_this is a regex demo&#39;&gt;</span><br></pre></td></tr></table></figure>

<h5 id="匹配目标"><a href="#匹配目标" class="headerlink" title="匹配目标"></a>匹配目标</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import re</span><br><span class="line">&gt;&gt;&gt; content &#x3D; &#39;Hello 1234567 Whord_this is a regex demo&#39;</span><br><span class="line">&gt;&gt;&gt; result &#x3D; re.match(&quot;^Hello\s(\d+)\sWhord.*demo$&quot;,content)</span><br><span class="line">&gt;&gt;&gt; print(result)</span><br><span class="line">&lt;re.Match object; span&#x3D;(0, 40), match&#x3D;&#39;Hello 1234567 Whord_this is a regex demo&#39;&gt;</span><br><span class="line"></span><br><span class="line">#如果正则表达式出现小括号，第一个小括号的内容就是group(1) </span><br><span class="line">&gt;&gt;&gt; print(result.group(1))</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure>

<h5 id="贪婪匹配"><a href="#贪婪匹配" class="headerlink" title="贪婪匹配"></a>贪婪匹配</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.*贪婪匹配，尽可能多的匹配，因为其中有一个\d+最少要有一个数字，所以只打印了7</span><br><span class="line">&gt;&gt;&gt; import re</span><br><span class="line">&gt;&gt;&gt; content &#x3D; &#39;Hello 1234567 Whord_this is a regex demo&#39;</span><br><span class="line">&gt;&gt;&gt; result &#x3D; re.match(&quot;^He.*(\d+).*demo$&quot;,content)</span><br><span class="line">&gt;&gt;&gt; print(result.group(1))</span><br><span class="line">7</span><br></pre></td></tr></table></figure>

<h5 id="非贪婪匹配"><a href="#非贪婪匹配" class="headerlink" title="非贪婪匹配"></a>非贪婪匹配</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.*?非贪婪匹配，尽可能少的匹配，看到括号里的\d这个数字了，就停止匹配，这样.*?就只匹配了Hello和空格</span><br><span class="line">&gt;&gt;&gt; import re</span><br><span class="line">&gt;&gt;&gt; content &#x3D; &#39;Hello 1234567 Whord_this is a regex demo&#39;</span><br><span class="line">&gt;&gt;&gt; result &#x3D; re.match(&quot;^He.*?(\d+).*demo$&quot;,content)</span><br><span class="line">&gt;&gt;&gt; print(result.group(1))</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure>

<h5 id="匹配模式"><a href="#匹配模式" class="headerlink" title="匹配模式"></a>匹配模式</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import re</span><br><span class="line">&gt;&gt;&gt; content &#x3D; &#39;&#39;&#39;Hello 1234567 Whord_this</span><br><span class="line">is a regex demo</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">#re.S就是表示&quot;.&quot;但是这个&quot;.&quot;可以匹配换行符，如果不加re.S的话会报错因为平时的&quot;.&quot;除了换行符，可以匹配任意字符</span><br><span class="line">&gt;&gt;&gt; result &#x3D; re.match(&quot;^He.*?(\d+).*?demo$&quot;,content,re.S)</span><br><span class="line">&gt;&gt;&gt; print(result.group(1))</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure>

<h5 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import re</span><br><span class="line">&gt;&gt;&gt; content &#x3D; &#39;price is $5.00&#39;</span><br><span class="line">&gt;&gt;&gt; result &#x3D; re.match(&quot;price is \$5\.00&quot;,content)</span><br><span class="line">&gt;&gt;&gt; print(result)</span><br><span class="line">&lt;re.Match object; span&#x3D;(0, 14), match&#x3D;&#39;price is $5.00&#39;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; result &#x3D; re.match(&quot;price is \$5.00&quot;,content)</span><br><span class="line">&gt;&gt;&gt; print(result)</span><br><span class="line">&lt;re.Match object; span&#x3D;(0, 14), match&#x3D;&#39;price is $5.00&#39;&gt;</span><br></pre></td></tr></table></figure>

<h5 id="总结-尽量使用泛匹配、使用括号得到匹配目标、尽量使用非贪婪模式、有换行符就用re-S"><a href="#总结-尽量使用泛匹配、使用括号得到匹配目标、尽量使用非贪婪模式、有换行符就用re-S" class="headerlink" title="总结:尽量使用泛匹配、使用括号得到匹配目标、尽量使用非贪婪模式、有换行符就用re.S"></a>总结:尽量使用泛匹配、使用括号得到匹配目标、尽量使用非贪婪模式、有换行符就用re.S</h5><h4 id="re-search方法"><a href="#re-search方法" class="headerlink" title="re.search方法"></a>re.search方法</h4><h5 id="re-search-扫描整个字符串并返回第一个成功的匹配"><a href="#re-search-扫描整个字符串并返回第一个成功的匹配" class="headerlink" title="re.search 扫描整个字符串并返回第一个成功的匹配"></a>re.search 扫描整个字符串并返回第一个成功的匹配</h5><h5 id="re-match-方法是要从其实位置匹配，如果匹配的不是起始位置那么就会返回None"><a href="#re-match-方法是要从其实位置匹配，如果匹配的不是起始位置那么就会返回None" class="headerlink" title="re.match 方法是要从其实位置匹配，如果匹配的不是起始位置那么就会返回None"></a>re.match 方法是要从其实位置匹配，如果匹配的不是起始位置那么就会返回None</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">这里需要使用re.search方法</span><br><span class="line">&gt;&gt;&gt; import re</span><br><span class="line">&gt;&gt;&gt; content &#x3D; &#39;most recent call last&#39;</span><br><span class="line">&gt;&gt;&gt; content &#x3D; &#39;most recent 1235648 call last demo&#39;</span><br><span class="line">&gt;&gt;&gt; result &#x3D; re.search(&quot;recent.*?(\d+).*?last&quot;,content)</span><br><span class="line">&gt;&gt;&gt; print(result)</span><br><span class="line">&lt;re.Match object; span&#x3D;(5, 29), match&#x3D;&#39;recent 1235648 call last&#39;&gt;</span><br><span class="line">&gt;&gt;&gt; print(result.group(1))</span><br><span class="line">1235648</span><br></pre></td></tr></table></figure>

<h5 id="总结：为了匹配方便，能用search就不用match"><a href="#总结：为了匹配方便，能用search就不用match" class="headerlink" title="总结：为了匹配方便，能用search就不用match"></a>总结：为了匹配方便，能用search就不用match</h5><h4 id="re-findall方法"><a href="#re-findall方法" class="headerlink" title="re.findall方法"></a>re.findall方法</h4><h5 id="搜索字符串，以列表的形式返回全部能匹配的字串"><a href="#搜索字符串，以列表的形式返回全部能匹配的字串" class="headerlink" title="搜索字符串，以列表的形式返回全部能匹配的字串"></a>搜索字符串，以列表的形式返回全部能匹配的字串</h5><p><img src="https://gitee.com/zhanqiaozai/picture/raw/master/1580223107107.png" alt="1580223107107"></p>
<h5 id="用findall方法将全部歌名打印出来"><a href="#用findall方法将全部歌名打印出来" class="headerlink" title="用findall方法将全部歌名打印出来"></a>用findall方法将全部歌名打印出来</h5><p><img src="https://gitee.com/zhanqiaozai/picture/raw/master/1580206689321.png" alt="1580223155421"></p>
<h4 id="re-sub"><a href="#re-sub" class="headerlink" title="re.sub"></a>re.sub</h4><h5 id="替换字符串中每一个匹配的子串后返回替换后的字符串"><a href="#替换字符串中每一个匹配的子串后返回替换后的字符串" class="headerlink" title="替换字符串中每一个匹配的子串后返回替换后的字符串"></a>替换字符串中每一个匹配的子串后返回替换后的字符串</h5><h5 id="用sub去掉a打印li中的-歌名"><a href="#用sub去掉a打印li中的-歌名" class="headerlink" title="用sub去掉a打印li中的 歌名"></a>用sub去掉a打印li中的 歌名</h5><p><img src="https://gitee.com/zhanqiaozai/picture/raw/master/1580229349011.png" alt="1580229349011"></p>
<h4 id="re-compile"><a href="#re-compile" class="headerlink" title="re.compile"></a>re.compile</h4><h5 id="将正则字符串编译成正则表达式对象"><a href="#将正则字符串编译成正则表达式对象" class="headerlink" title="将正则字符串编译成正则表达式对象"></a>将正则字符串编译成正则表达式对象</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将一个正则表达式串编译成正则对象，以便于复用该匹配模式</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 导入re模块</span><br><span class="line">&gt;&gt;&gt; import re</span><br><span class="line"># 建立一个字符串赋值给content</span><br><span class="line">&gt;&gt;&gt; content &#x3D; &#39;&#39;&#39;Hello 1234567 Whord_this</span><br><span class="line">is a regex demo</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line"># 进行字符串编译成对象，用match方法从开头搜索</span><br><span class="line">&gt;&gt;&gt; pattern &#x3D; re.compile(&quot;Hello.*?demo&quot;,re.S)</span><br><span class="line"># 可以直接调用pattern变量，就不需要在括号里再打一遍代码</span><br><span class="line">&gt;&gt;&gt; result &#x3D; re.match(pattern,content)</span><br><span class="line"># 打印</span><br><span class="line">&gt;&gt;&gt; print(result)</span><br><span class="line">&lt;re.Match object; span&#x3D;(0, 40), match&#x3D;&#39;Hello 1234567 Whord_this\nis a regex demo&#39;&gt;</span><br></pre></td></tr></table></figure>


      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/04/07/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          文件上传
        
      </div>
    </a>
  
  
    <a href="/2020/04/03/php/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">php</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>

  
</article>


<div class="ds-share share" data-thread-key="python爬虫" data-title="python爬虫" data-url="https://zhanqiaozai.github.io/2020/04/03/python%E7%88%AC%E8%99%AB/"  data-images="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg" data-content="python爬虫">
    <div class="ds-share-inline">
      <ul  class="ds-share-icons-16">
      	<li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
        <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
        <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
        <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
        <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>
      </ul>
      <div class="ds-share-icons-more">
      </div>
    </div>
 </div>
 





</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2020 zhanqiaozai
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">



<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>

<script src="/js/main.js"></script>




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>